<!DOCTYPE html>
<html>
  <body>
    <div id="player"></div>



    <script>

     var pieces = {
        'beethoven7m2': {
            'pages': [884, 953, 1019, 1046, 1061, 1076, 1107, 1133, 1160, 1182, 1204, 1226, 1248, 1277, 1304, 1314, 1341, 1367, 1405],
            'pdf' : 'IMSLP06801-Beethoven_-_Symphony_No.7_Mvt.II_(ed._Unger).pdf',
            'videoId': '-4788Tmz9Zo'
        }
     }

     var pages = pieces['beethoven7m2']['pages']



      function getCurrentPage(currentTime) {
        for (i = 1; i < pages.length; i++) {
          if (currentTime < pages[i]) {
            return i;
          }
        }
        return 1
      }

      function setVideoTime(currentPage) {
        if(currentPage <= pages.length){
            player.seekTo(pages[currentPage-1])
        }
      }

      var tag = document.createElement('script');

      tag.src = "https://www.youtube.com/iframe_api";
      var firstScriptTag = document.getElementsByTagName('script')[0];
      firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);

      var player;
      function onYouTubeIframeAPIReady() {
        player = new YT.Player('player', {
          height: '390',
          width: '640',
          videoId: '-4788Tmz9Zo',
          events: {
            'onReady': onPlayerReady
          }
        });
      }
      function onPlayerReady(event) {
        event.target.playVideo();
        player.seekTo(pages[0])
      }
      setInterval(function(){
        if(pdfDoc != null){
            queueRenderPage(getCurrentPage(player.getCurrentTime()))
        }
      }, 1000)
    </script>

  <script src="http://mozilla.github.io/pdf.js/build/pdf.js"></script>


    <div>
      <button id="prev">Previous</button>
      <button id="next">Next</button>
      &nbsp; &nbsp;
      <span>Page: <span id="page_num"></span> / <span id="page_count"></span></span>
    </div>

    <canvas id="the-canvas"></canvas>
 <script src="pdf-controller.js"></script>

  </body>
</html>